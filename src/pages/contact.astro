---
import Base from '../layouts/Base.astro';
---

<Base title="MasterCaterer — Contact" description="Get a quote or ask a question.">
  <main class="mx-auto max-w-6xl px-4 py-10">
    <h1 class="text-3xl md:text-4xl font-extrabold">Contact</h1>
    <p class="mt-2 text-slate-600">
      Tell us about your event—we’ll get back to you quickly with options and pricing.
    </p>

    <section class="mt-8 grid gap-10 md:grid-cols-2">
      <!-- Left: helpful info -->
      <div class="space-y-4">
        <div class="rounded-2xl border border-brand-surface p-5">
          <h2 class="font-semibold text-lg">How we work</h2>
          <ul class="mt-3 list-disc pl-5 text-slate-600 text-sm space-y-2">
            <li>Share your event details and any menu preferences.</li>
            <li>We’ll reply with availability and a tailored quote.</li>
            <li>Flexible menus for corporate, schools, and private events.</li>
          </ul>
        </div>

        <div class="rounded-2xl border border-brand-surface p-5">
          <h2 class="font-semibold text-lg">Reach us directly</h2>
          <p class="mt-2 text-slate-600 text-sm">
            Email: <a class="link-underline" href="mailto:toyintunde@gmail.com">toyintunde@gmail.com</a><br />
            Phone: <a class="link-underline" href="tel:+2348023948656">+234 802 394 8656</a>
          </p>
        </div>
      </div>

      <!-- Right: form -->
      <div class="rounded-2xl border border-brand-surface p-6">
        <!-- 3A: FORMSPREE — replace XXXXXXXX with your form ID -->
        <!-- Create a form at https://formspree.io/ , then paste its ID -->
        <form id="contactForm" action="https://formspree.io/f/xgvzdjqn" method="POST" class="space-y-4">
          <!-- Honeypot (simple anti-spam) -->
          <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off" />

          <div>
            <label for="name" class="block text-sm font-medium">Name</label>
            <input
              id="name" name="name" type="text" required
              class="mt-1 block w-full rounded-xl border border-brand-surface bg-white px-3 py-2
                     focus:outline-none focus:ring-2 focus:ring-brand-primary/40"
              placeholder="Your full name"
            />
          </div>

          <div>
            <label for="email" class="block text-sm font-medium">Email</label>
            <input
              id="email" name="email" type="email" required
              class="mt-1 block w-full rounded-xl border border-brand-surface bg-white px-3 py-2
                     focus:outline-none focus:ring-2 focus:ring-brand-primary/40"
              placeholder="you@example.com"
            />
          </div>

          <div>
            <label for="message" class="block text-sm font-medium">Message</label>
            <textarea
              id="message" name="message" rows="6" required
              class="mt-1 block w-full rounded-xl border border-brand-surface bg-white px-3 py-2
                     focus:outline-none focus:ring-2 focus:ring-brand-primary/40 resize-y"
              placeholder="Tell us about your event, date, location, and any menu ideas."
            ></textarea>
          </div>

          <!-- Optional: where the enquiry came from -->
          <input type="hidden" name="source" value="Website Contact" />

          <div class="flex items-center gap-3">
            <button
              type="submit"
              class="px-5 py-3 rounded-2xl bg-brand-primary text-white shadow-[var(--shadow-soft)]
                     hover:translate-y-[-1px] transition"
            >
              Send message
            </button>

            <!-- 3B: Mailto fallback link (shows if JS fails or user prefers email) -->
            <a
              href="mailto:toyintunde@gmail.com?subject=New%20enquiry%20from%20MasterCaterer%20site"
              class="text-sm text-brand-accent"
            >
              or email us directly
            </a>
          </div>

          <p id="formStatus" class="mt-2 text-sm"></p>
        </form>
      </div>
    </section>
  </main>

  <!-- Progressive enhancement: AJAX submit for Formspree -->
  <script type="module">
    const form = document.getElementById('contactForm');
    const statusEl = document.getElementById('formStatus');

    if (form && statusEl) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        statusEl.textContent = 'Sending…';

        try {
          const res = await fetch(form.action, {
            method: 'POST',
            headers: { 'Accept': 'application/json' },
            body: new FormData(form),
          });

          if (res.ok) {
            statusEl.textContent = 'Thanks! Your message has been sent.';
            form.reset();
          } else {
            statusEl.textContent = 'Hmm, something went wrong. Please try again or use the email link.';
          }
        } catch {
          statusEl.textContent = 'Network error. Please try again or use the email link.';
        }
      });
    }
  </script>
</Base>
